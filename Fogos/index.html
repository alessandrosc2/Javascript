<!DOCTYPE html>
<html>
<head>
  <title>Cidade com Explosão de Bolinhas Coloridas</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    
    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <canvas id="animation"></canvas>

  <script>
    var canvas = document.getElementById("animation");
    var ctx = canvas.getContext("2d");
    var positionX = 0;
    var positionY = 0;
    var trail = [];

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    document.addEventListener("mousemove", function(event) {
      positionX = event.clientX;
      positionY = event.clientY;
    });

    document.addEventListener("mousedown", function(event) {
      explodeConfetti();
    });

    function explodeConfetti() {
      for (var i = 0; i < 100; i++) {
        var angle = Math.random() * Math.PI * 2;
        var speed = Math.random() * 6 + 1;
        var radius = Math.random() * 4 + 1;
        var confetti = {
          x: positionX,
          y: positionY,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          radius: radius,
          color: getRandomColor()
        };
        trail.push(confetti);
      }
    }

    function getRandomColor() {
      var letters = "0123456789ABCDEF";
      var color = "#";
      for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

    function draw() {
      ctx.fillStyle = "black"; // Definir fundo preto
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Desenhar prédios
      ctx.strokeStyle = "gray";
      ctx.lineWidth = 2;

      // Primeiro prédio
      ctx.beginPath();
      ctx.moveTo(260, canvas.height - 400);
      ctx.lineTo(88, canvas.height - 400);
      ctx.lineTo(88, canvas.height);
      ctx.lineTo(260, canvas.height);
      ctx.closePath();
      ctx.stroke();

      // Segundo prédio
      ctx.beginPath();
      ctx.moveTo(570, canvas.height - 300);
      ctx.lineTo(290, canvas.height - 300);
      ctx.lineTo(290, canvas.height);
      ctx.lineTo(570, canvas.height);
      ctx.closePath();
      ctx.stroke();

      // Terceiro prédio
      ctx.beginPath();
      ctx.moveTo(760, canvas.height - 350);
      ctx.lineTo(590, canvas.height - 350);
      ctx.lineTo(590, canvas.height);
      ctx.lineTo(760, canvas.height);
      ctx.closePath();
      ctx.stroke();

      // Quarto prédio
      ctx.beginPath();
      ctx.moveTo(1170, canvas.height - 250);
      ctx.lineTo(790, canvas.height - 250);
      ctx.lineTo(790, canvas.height);
      ctx.lineTo(1170, canvas.height);
      ctx.closePath();
      ctx.stroke();

      // Quinto prédio
      ctx.beginPath();
      ctx.moveTo(1395, canvas.height - 440);
      ctx.lineTo(1182, canvas.height - 440);
      ctx.lineTo(1182, canvas.height);
      ctx.lineTo(1395, canvas.height);
      ctx.closePath();
      ctx.stroke();

      // Desenhar janelas
      ctx.fillStyle = "gray";
      var windowWidth = 18;
      var windowHeight = 25;
      var windowSpacingX = 36;
      var windowSpacingY = 36;

      // Primeiro prédio
      for (var i = 0; i < 3; i++) {
        for (var j = 0; j < 10; j++) {
          var windowX = 110 + i * (windowWidth + windowSpacingX);
          var windowY = canvas.height - 360 + j * (windowHeight + windowSpacingY);
          ctx.fillRect(windowX, windowY, windowWidth, windowHeight);
        }
      }

      // Segundo prédio
      for (var i = 0; i < 5; i++) {
        for (var j = 0; j < 8; j++) {
          var windowX = 310 + i * (windowWidth + windowSpacingX);
          var windowY = canvas.height - 270 + j * (windowHeight + windowSpacingY);
          ctx.fillRect(windowX, windowY, windowWidth, windowHeight);
        }
      }

      // Terceiro prédio
      for (var i = 0; i < 3; i++) {
        for (var j = 0; j < 6; j++) {
          var windowX = 610 + i * (windowWidth + windowSpacingX);
          var windowY = canvas.height - 320 + j * (windowHeight + windowSpacingY);
          ctx.fillRect(windowX, windowY, windowWidth, windowHeight);
        }
      }

      // Quarto prédio
      for (var i = 0; i < 7; i++) {
        for (var j = 0; j < 6; j++) {
          var windowX = 810 + i * (windowWidth + windowSpacingX);
          var windowY = canvas.height - 220 + j * (windowHeight + windowSpacingY);
          ctx.fillRect(windowX, windowY, windowWidth, windowHeight);
        }
      }

      // Quinto prédio
      for (var i = 0; i < 4; i++) {
        for (var j = 0; j < 10; j++) {
          var windowX = 1200 + i * (windowWidth + windowSpacingX);
          var windowY = canvas.height - 385 + j * (windowHeight + windowSpacingY);
          ctx.fillRect(windowX, windowY, windowWidth, windowHeight);
        }
      }


      // Desenhar rastro de cometa
      for (var i = 0; i < trail.length; i++) {
        var confetti = trail[i];

        confetti.x += confetti.vx;
        confetti.y += confetti.vy;
        confetti.vy += 0.1;

        ctx.beginPath();
        ctx.arc(confetti.x, confetti.y, confetti.radius, 0, Math.PI * 2);
        ctx.fillStyle = confetti.color;
        ctx.fill();

        if (confetti.y >= canvas.height) {
          trail.splice(i, 1);
          i--;
        }
      }

      requestAnimationFrame(draw);
    }

    draw();
  </script>
</body>
</html>
